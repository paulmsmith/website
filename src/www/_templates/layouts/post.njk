{% extends "./blog.njk" %}

{% set currentPost = collections.all | getCollectionItem(page) %}

{% block primarycontent %}

  <div class="l-post__body">
    <div class="prose">
      {{ content | safe }}
    </div>
  </div>
  <!-- /.l-post__body -->

  <div class="l-post__footer">

    <hr class="l-divider l-divider--zig-to-the-zag">

    <div class="c-meta c-meta--publication">
      <span class="c-meta__publication-date">
        <span class="c-meta__publication-date__label">Published: </span>
        <time datetime="{{ page.date | htmlDateString }}" class="c-meta__publication-date__date c-meta__time">
          <em>{{ page.date | readableDate }}</em>
        </time>
      </span>
      {% if currentPost.data.tags %}
      in:
      <ul class="c-meta__tags">
        {% for tag in currentPost.data.tags %}
          <li>{{ tag | title }}</li>
        {% endfor %}
      </ul>
      {% endif %}
      {% if original_url %}
      <div class="c-meta__row c-meta__row--small">
        Originally posted:<br> <a href="{{ original_url }}">{{ original_url }}</a>
      </div>
      {% endif %}
    </div>
    <!-- / .c-meta -->

    <hr class="l-divider l-divider--zig-to-the-zag">

    {%- set nextPost = collections.post | getNextCollectionItem(page) %}
    {%- set previousPost = collections.post | getPreviousCollectionItem(page) %}
    {% if nextPost or previousPost %}
      <ul class="c-post-navigation">
        {%- if previousPost %}
          <li class="c-post-navigation__item c-post-navigation__item--prev">
            <div class="c-post-navigation__item__label">Previous: </div>
            <a href="{{ previousPost.url | url }}">{{ previousPost.data.title }}</a>
          </li>
        {% endif %}
        {%- if nextPost %}
          <li class="c-post-navigation__item c-post-navigation__item--next">
            <div class="c-post-navigation__item__label">Next: </div>
            <a href="{{ nextPost.url | url }}">{{ nextPost.data.title }}</a>
          </li>
        {% endif %}
      </ul>
    {% endif %}

  </div>
  <!-- /.l-post__footer -->

{% endblock %}
